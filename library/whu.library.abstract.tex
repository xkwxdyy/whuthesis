\WHUDependency { library = { constant, information } }
\WHUProvideExplLibrary{abstract}{\whu@date}{\whu@version}{environment for abstract}


\cs_new:Nn \__whu_abstract_zh_format_set: { }
\cs_new:Nn \__whu_abstract_en_format_set: { }
\cs_new:Nn \__whu_abstract_zh_begin: { }
\cs_new:Nn \__whu_abstract_zh_end: { }
\cs_new:Nn \__whu_abstract_en_begin: { }
\cs_new:Nn \__whu_abstract_en_end: { }
\cs_new:Nn \__whu_abstract_zh_format: { }
\cs_new:Nn \__whu_abstract_en_format: { }
\cs_new:Nn \__whu_keywords_constant_zh_format_set: { }
\cs_new:Nn \__whu_keywords_constant_en_format_set: { }
\cs_new:Nn \__whu_keywords_zh_above_sep: { }
\cs_new:Nn \__whu_keywords_en_above_sep: { }
\cs_new:Nn \__whu_keywords_zh_output:
  {
    \group_begin:
    \__whu_keywords_constant_zh_format_set:
    \__whu_use_title_constant:nn { keywords } { zh } :~
    \group_end:
    \clist_use:Nn \g__whu_information_keywords_zh_clist {,~}
  }
\cs_new:Nn \__whu_keywords_en_output:
  {
    \group_begin:
    \__whu_keywords_constant_en_format_set:
    \__whu_use_title_constant:nn { keywords } { en } :~
    \group_end:
    \clist_use:Nn \g__whu_information_keywords_en_clist {,~}
  }
\NewDocumentEnvironment { abstract } {}
  {
    \__whu_abstract_zh_format_set:
    \chapter
      [
        \__whu_use_title_constant:nn { abstract } { zh-toc }
      ]
      {
        \__whu_use_title_constant:nn { abstract } { zh }
      }
    \__whu_abstract_zh_begin:
    \__whu_abstract_zh_format:
  }
  { 
    \__whu_keywords_zh_above_sep:
    \__whu_keywords_zh_output:
    \__whu_abstract_zh_end:
  }
\NewDocumentEnvironment { abstract* } {}
  {
    \__whu_abstract_en_format_set:
    \chapter
      [
        \__whu_use_title_constant:nn { abstract } { en-toc }
      ]
      {
        \__whu_use_title_constant:nn { abstract } { en }
      }
    \__whu_abstract_en_begin:
    \__whu_abstract_en_format:
  }
  { 
    \__whu_keywords_en_above_sep:
    \__whu_keywords_en_output:
    \__whu_abstract_en_end:
  }