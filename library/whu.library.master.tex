\WHUDependency 
  {
    package = { tabularray },
    library = { cover, util, constant, information }
  }
\WHUProvideExplLibrary{master}{\whu@date}{\whu@version}{setting for normal master thesis of Wuhan University}

\cs_set:Nn \__whu_type_for_library_additional_setting:
  {
    % 用 \AtBeginDocument 可以在 \AtEndPreamble 之后执行，可以覆盖 hyperref 的原始设置
    % https://github.com/Sophanatprime/cus/issues/24#issuecomment-2041074019
    \AtBeginDocument
      { \hypersetup { allcolors = black } }
  }
\cs_set:Nn \__whu_type_for_print_additional_setting:
  {
    \AtBeginDocument
      { \hypersetup { allcolors = black } }
  }





% ------------ %
% constant 设置 %
% ------------ %
% \AtEndPreamble
%   {
%     \str_case:Vn \g__whu_master_degree_type_str
%       {
%         { academic } { \__whu_academic_master_constant_set: }
%         { professional } { \__whu_professional_master_constant_set: }
%       }
%   }
% \cs_new:Nn \__whu_academic_master_constant_set: 
%   {
%     \__whu_academic_master_constant_initial_set:
%     \__whu_academic_master_constant_additional_set:
%   }
% \cs_new:Nn \__whu_academic_master_constant_additional_set: { }
% \cs_new:Nn \__whu_academic_master_constant_initial_set:
%   {
%     \cs_set:Nn \__whu_cover_zh_thesis_type_format: { \zihao { 2 } \ziju{1} }
%     \__whu_set_information_family:n
%       {
%         thesis-type/zh = 硕士学位论文,
%         title =
%           {
%             zh = 武汉大学硕士学位论文 \LaTeX{} 模板,
%             en = \LaTeX{} Template~for~Professional~Master's~Degree~of~Wuhan~University
%           },
%         department =
%           {
%             zh = 学院,
%             en = School
%           },
%         author =
%           {
%             zh = 研究生姓名,
%             en = Candidate
%           },
%         student-id =
%           {
%             zh = 学号,
%             en = Student~Number
%           },
%         supervisor =
%           {
%             zh = 指导教师姓名、职称,
%             en = Supervisor
%           },
%         major =
%           {
%             zh = 专业名称,
%             en = Major
%           },
%         professional-field =
%           {
%             zh = 研究方向,
%             en = Speciality
%           },
%       }
%     \__whu_set_information_constant_family:n
%       {
%         clc/zh          = 分类号,
%         secret-level/zh = 密级,
%         udc/zh          = UDC,
%         school-id/zh    = 编号,
%         author =
%           {
%             zh = 研究生姓名,
%             en = Candidate
%           },
%         student-id =
%           {
%             zh = 学号,
%             en = Student~Number
%           },
%         supervisor =
%           {
%             zh = 指导教师姓名、职称,
%             en = Supervisor
%           },
%         major =
%           {
%             zh = 专业名称,
%             en = Major
%           },
%         professional-field =
%           {
%             zh = 研究方向,
%             en = Speciality
%           },
%       }
%     \cs_set:Nn \__whu_cover_zh_master_information_content: 
%       {
%         \begin{minipage} [ c ] { \g__whu_cover_zh_information_width_dim }
%           \clist_set:Nx \l__whu_tmpa_clist
%             {
%               \__whu_use_information_constant:nn { author } { zh } ,
%               \__whu_use_information_constant:nn { student-id } { zh } ,
%               \__whu_use_information_constant:nn { supervisor } { zh } ,
%               \__whu_use_information_constant:nn { major } { zh } ,
%               \__whu_use_information_constant:nn { professional-field } { zh }
%             }
%           \clist_set:Nx \l__whu_tmpb_clist
%             {
%               \__whu_use_information:nn { author } { zh },
%               \__whu_use_information:nn { student-id } { zh },
%               \__whu_use_information:nn { supervisor } { zh },
%               \__whu_use_information:nn { major } { zh },
%               \__whu_use_information:nn { professional-field } { zh }
%             }
%           \bool_until_do:nn
%             { \clist_if_empty_p:N \l__whu_tmpa_clist }
%             {
%               \clist_pop:NN \l__whu_tmpa_clist \l__whu_tmpa_tl
%               \clist_pop:NN \l__whu_tmpb_clist \l__whu_tmpb_tl
%               \__whu_spread_box:nn { 4.45cm } { \l__whu_tmpa_tl } :
%               \hspace{1.3em}
%               \l__whu_tmpb_tl
%               \skip_vertical:n { 3ex }
%             }
%         \end{minipage}
%       }
%     \cs_set:Nn \__whu_cover_en_master_information_content: 
%       {
%         \begin{tblr}
%           {
%             cell{1, 3}{2} = { cmd = \textsc },
%             % hlines, vlines,
%             colspec = { X[1,r] X[1,l] },
%             rowsep = 1.5pt
%           }
%           \__whu_use_information_constant:nn { author } { en } : & \__whu_use_information:nn { author } { en } \\
%           \__whu_use_information_constant:nn { student-id } { en } : & \__whu_use_information:nn { student-id } { en } \\
%           \__whu_use_information_constant:nn { supervisor } { en } : & \__whu_use_information:nn { supervisor } { en } \\
%           \__whu_use_information_constant:nn { major } { en } : & \__whu_use_information:nn { major } { en } \\
%           \__whu_use_information_constant:nn { professional-field } { en } : & \__whu_use_information:nn { professional-field } { en }
%         \end{tblr}
%       }
%   }
% \cs_new:Nn \__whu_professional_master_constant_set: 
%   {
%     \__whu_professional_master_constant_initial_set:
%     \__whu_professional_master_constant_additional_set:
%   }
% \cs_new:Nn \__whu_professional_master_constant_additional_set: { }
% \cs_new:Nn \__whu_professional_master_constant_initial_set:
%   {
%     \cs_set:Nn \__whu_cover_zh_thesis_type_format: { \zihao { 2 } \ziju{0.5} }
%     \__whu_set_information_family:n
%       {
%         thesis-type/zh = 硕士专业学位论文,
%         title =
%           {
%             zh = 武汉大学硕士专业学位论文 \LaTeX{} 模板,
%             en = \LaTeX{} Template~for~Professional~Master's~Degree~of~Wuhan~University
%           },
%         department =
%           {
%             zh = 数学与统计学院,
%             en = School~of~Mathematics~and~Statistics
%           },
%         author =
%           {
%             zh = 研究生姓名,
%             en = Candidate
%           },
%         student-id =
%           {
%             zh = 学号,
%             en = Student~Number
%           },
%         supervisor =
%           {
%             zh = 指导教师姓名、职称,
%             en = Supervisor
%           },
%         major =
%           {
%             zh = 专业名称,
%             en = Major
%           },
%       }
%     \__whu_set_information_constant_family:n
%       {
%         clc/zh          = 分类号,
%         secret-level/zh = 密级,
%         udc/zh          = UDC,
%         school-id/zh    = 编号,
%         author =
%           {
%             zh = 研究生姓名,
%             en = Candidate
%           },
%         student-id =
%           {
%             zh = 学号,
%             en = Student~Number
%           },
%         supervisor =
%           {
%             zh = 指导教师姓名、职称,
%             en = Supervisor
%           },
%         major =
%           {
%             zh = 专业类别（领域）,
%             en = Major
%           },
%       }
%     \cs_set:Nn \__whu_cover_zh_information_content: 
%       {
%         \begin{minipage} [ c ] { 0.72\textwidth }
%           \clist_set:Nx \l__whu_tmpa_clist
%             {
%               \__whu_use_information_constant:nn { author } { zh } ,
%               \__whu_use_information_constant:nn { student-id } { zh } ,
%               \__whu_use_information_constant:nn { supervisor } { zh } ,
%               \__whu_use_information_constant:nn { major } { zh } ,
%             }
%           \clist_set:Nx \l__whu_tmpb_clist
%             {
%               \__whu_use_information:nn { author } { zh },
%               \__whu_use_information:nn { student-id } { zh },
%               \__whu_use_information:nn { supervisor } { zh },
%               \__whu_use_information:nn { major } { zh },
%             }
%           \bool_until_do:nn
%             { \clist_if_empty_p:N \l__whu_tmpa_clist }
%             {
%               \clist_pop:NN \l__whu_tmpa_clist \l__whu_tmpa_tl
%               \clist_pop:NN \l__whu_tmpb_clist \l__whu_tmpb_tl
%               \__whu_spread_box:nn { 4.45cm } { \l__whu_tmpa_tl } :
%               \hspace{1.3em}
%               \l__whu_tmpb_tl
%               \skip_vertical:n { 3ex }
%             }
%         \end{minipage}
%       }
%     \cs_set:Nn \__whu_cover_en_information_content: 
%       {
%         \begin{tblr}
%           {
%             cell{1, 3}{2} = { cmd = \textsc },
%             % hlines, vlines,
%             colspec = { X[1,r] X[1,l] },
%             rowsep = 1.5pt
%           }
%           \__whu_use_information_constant:nn { author } { en } : & \__whu_use_information:nn { author } { en } \\
%           \__whu_use_information_constant:nn { student-id } { en } : & \__whu_use_information:nn { student-id } { en } \\
%           \__whu_use_information_constant:nn { supervisor } { en } : & \__whu_use_information:nn { supervisor } { en } \\
%           \__whu_use_information_constant:nn { major } { en } : & \__whu_use_information:nn { major } { en } \\
%         \end{tblr}
%       }
%   }


% 封面设置
\cs_set:Nn \__whu_cover_zh_head_format: 
  {  \zihao{4} \fangsong  }
\cs_set:Nn \__whu_cover_zh_master_head_content:
  {
    \begin{tblr}
      {
        % hlines,vlines,
        width   = 0.95\textwidth,
        rows    = { f },
        row{2}  = { abovesep += 0.1em },
        colspec = { X[1,l] X[4.6cm] X[1,l] },
        columns = { preto = \__whu_cover_zh_head_format: },
      }
      \__whu_spread_box:nn { 1.5cm } { 分类号 } \__whu_cover_zh_head_underline:n { \__whu_use_information:nn { clc } { zh } }
        & & \__whu_spread_box:nn { 1.5cm } { 密级 } \__whu_cover_zh_head_underline: \\
        \__whu_spread_box:nn { 1.5cm } { UDC } \__whu_cover_zh_head_underline: 
        & & \__whu_spread_box:nn { 1.5cm } { 编号 }  \__whu_cover_zh_head_underline:n { 10486 }
    \end{tblr}
  }

\whusetup[cover/zh/sep]
  { top-head = 1.1em }
\keys_set:nn { whu/cover/zh/width }
  {
    universitynamelogo = 10cm,
    information = 0.72\textwidth
  }
\ProcessKeyOptions [ whu/master ]